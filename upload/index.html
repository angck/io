<!DOCTYPE html>
<html>
	<head>
    	<meta charset='utf-8' />
    	<title>File Upload</title>
    	<script src="fileupload.js"></script>
  	</head>
	<body>
		<input type="file" multiple accept="image/*"/>
		<div>
			<object width="200" height="200" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
				<param name="wmode" value="transparent">
				<param name="allowscriptaccess" value="always">
				<param name="movie" value="javascripts/upload.swf">
			</object>
		</div>
		<div style="width: 200px">
			<p id="progress" style="background:gold;"></p>
		</div>

<script>
	var input = document.getElementsByTagName('input')[0];
	var pp = document.getElementById('progress');
	FileUpload.init(input, {
		// url: '/web/servlet/FileUpload',
		url: '/upload',
		refile: /(?:png|jpg|jpeg|gif)/,
		params: {
			name: 'aaa',
			age: 33
		},
		success: function() {
			console.log('success')
		},
		progress: function(position, totalSize) {
			console.log('progress' + position)
			console.log('progress' + totalSize)
			//pp.width =  position+'%';
		},
		failure: function() {
			console.log('error')
		}
	})
</script>
	</body>
</html>
